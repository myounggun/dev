<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>웹지엘(webgl) - Myoung Chae</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="웹지엘 공부에 앞서 살펴봐야 할 기본 내용을 정리해 본다.">
<meta property="og:type" content="article">
<meta property="og:title" content="웹지엘(webgl)">
<meta property="og:url" content="http://myounggun.github.io/dev/2016/01/06/webgl/index.html">
<meta property="og:site_name" content="Myoung Chae">
<meta property="og:description" content="웹지엘 공부에 앞서 살펴봐야 할 기본 내용을 정리해 본다.">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/6646861/12419771/7c54f146-befb-11e5-8433-e7ed9dbf582c.png">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/6646861/12256982/908e8ff2-b945-11e5-8aa6-36b37dee8ea8.png">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/6646861/12419761/72045dda-befb-11e5-9ff6-cfe106a5f262.png">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/6646861/12420107/d0972236-befd-11e5-89ee-3b56f4f0345d.png">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/6646861/12420122/f4ffc2cc-befd-11e5-870c-43178a55bfd7.png">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/6646861/12261818/f054ba1c-b966-11e5-90a3-2e76e3dc2569.png">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/6646861/12261817/f02ced98-b966-11e5-905c-5a2378397ed6.png">
<meta property="og:updated_time" content="2016-02-28T02:30:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="웹지엘(webgl)">
<meta name="twitter:description" content="웹지엘 공부에 앞서 살펴봐야 할 기본 내용을 정리해 본다.">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/dev/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/dev/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/dev/css/style.css" type="text/css">
  

</head>

<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/dev/">Home</a>
        
          <a class="main-nav-link" href="/dev/archives">Archives</a>
        
          <a class="main-nav-link" href="/dev/categories">Categories</a>
        
          <a class="main-nav-link" href="/dev/tags">Tags</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://myounggun.github.io/dev"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer"><article id="post-webgl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      웹지엘(webgl)
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/dev/2016/01/06/webgl/" class="article-date">
  <time datetime="2016-01-06T02:07:18.000Z" itemprop="datePublished">2016-01-06</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/dev/categories/webgl/">webgl</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>웹지엘 공부에 앞서 살펴봐야 할 기본 내용을 정리해 본다.</p>
<a id="more"></a>
<h1 id="웹지엘이란"><a href="#웹지엘이란" class="headerlink" title="웹지엘이란?"></a>웹지엘이란?</h1><ul>
<li>오픈지엘 ES 2.0 기반 - <a href="https://www.khronos.org/webgl" target="_blank" rel="external">웹지엘 소개</a></li>
<li>Canvas3D로 프로토타입 시작</li>
<li>2009년, 웹지엘 위원회 창설</li>
<li>2011년, 웹지엘 1.0 스펙 결정 - <a href="https://www.khronos.org/registry/webgl/specs/latest" target="_blank" rel="external">웹지엘 스펙</a></li>
<li>로우 레벨 API</li>
<li>로열티 없는 공개 표준</li>
<li>GPU 렌더링 지원</li>
<li>웹 브라우저 내장 (플러그 X)</li>
<li>많은 브라우저 벤더 참여</li>
</ul>
<h2 id="렌더링-방법"><a href="#렌더링-방법" class="headerlink" title="렌더링 방법"></a>렌더링 방법</h2><p>그래픽 라이브러리는 두 가지 렌더링 방식을 가지고 있다.</p>
<h3 id="즉시-모드-immedate-mode"><a href="#즉시-모드-immedate-mode" class="headerlink" title="즉시 모드(immedate mode)"></a>즉시 모드(immedate mode)</h3><ul>
<li>프레임마다 전체 장면을 다시 그린다.</li>
<li>사용자가 구현할 부분이 많다.</li>
<li>웹지엘은 즉시모도 사용한다.</li>
</ul>
<h3 id="지연-보류-모드-retain-mode"><a href="#지연-보류-모드-retain-mode" class="headerlink" title="지연(보류) 모드(retain mode)"></a>지연(보류) 모드(retain mode)</h3><ul>
<li>내부 모델(렌더 트리 등)을 유지하여 변화된 부분만 업데이트 한다.</li>
<li>그래픽 라이브러리에서 많은 일을 사용자 대신 해준다.</li>
<li><a href="http://threejs.org" target="_blank" rel="external">three.js</a>, SVG, Flash 등이 지연모드를 사용한다.</li>
</ul>
<h2 id="브라우저-지원"><a href="#브라우저-지원" class="headerlink" title="브라우저 지원"></a>브라우저 지원</h2><p>2012년만 해도 모바일웹에서 웹지엘을 지원하는 브라우저가 전무했다.<br>하지만 2016년 1월 현재, iOS/Android에서 웹지엘을 어느정도 지원하고 있다.</p>
<ul>
<li><p>웹지엘 지원 여부 확인 </p>
<ul>
<li><a href="http://get.webgl.org" target="_blank" rel="external">http://get.webgl.org</a></li>
<li><a href="http://caniuse.com/#search=webgl" target="_blank" rel="external">http://caniuse.com/#search=webgl</a></li>
</ul>
</li>
<li><p>웹지엘 세부사항 확인</p>
<ul>
<li><a href="http://www.doesmybrowsersupportwebgl.com" target="_blank" rel="external">http://www.doesmybrowsersupportwebgl.com</a></li>
<li><a href="http://webglreport.com" target="_blank" rel="external">http://webglreport.com</a></li>
</ul>
</li>
<li><p>웹지엘 데모</p>
<ul>
<li><a href="https://www.chromeexperiments.com" target="_blank" rel="external">https://www.chromeexperiments.com</a></li>
<li><a href="http://webglsamples.org" target="_blank" rel="external">http://webglsamples.org</a></li>
</ul>
</li>
</ul>
<h3 id="PC"><a href="#PC" class="headerlink" title="PC"></a>PC</h3><ul>
<li>IE11+</li>
<li>Firefox 4+</li>
<li>Chrome 8+</li>
<li>Safari 5.1+</li>
</ul>
<h3 id="모바일"><a href="#모바일" class="headerlink" title="모바일"></a>모바일</h3><ul>
<li>iOS Safari 8+</li>
<li>Android Browser 46+ (Android 5-6.x)</li>
<li>Chrome for Android 47+</li>
</ul>
<h1 id="웹지엘-디버깅"><a href="#웹지엘-디버깅" class="headerlink" title="웹지엘 디버깅"></a>웹지엘 디버깅</h1><p>웹지엘 개발에 도움을 주는 디버깅 툴을 소개한다.</p>
<h2 id="웹-개발-디버깅-툴"><a href="#웹-개발-디버깅-툴" class="headerlink" title="웹 개발 디버깅 툴"></a>웹 개발 디버깅 툴</h2><p>웹 개발 시 사용하는 디버깅 도구로 웹지엘 오류를 출력하는 방법을 설명한다.</p>
<ul>
<li>크롬 개발자 도구(Chrome Developer Tools)<ul>
<li>구글 크롬 브라우저 내장</li>
<li>보기 &gt; 개발자 정보 &gt; 개발자 도구 (맥: cmd+option+i, 윈도우: ctrl+shift+i)</li>
</ul>
</li>
<li>파이어버그(Firebug)<ul>
<li>파이어폭스 확장 프로그램 by 조 휴잇(Joe Hewitt)</li>
<li><a href="http://getfirebug.com" target="_blank" rel="external">http://getfirebug.com</a></li>
<li>도구 &gt; 웹개발 도구 &gt; Firebug &gt; Firebug 열기 (F12)</li>
</ul>
</li>
<li>gl.getError()를 활용해서 웹지엘 오류를 자바스크립트 콘솔에 출력<ul>
<li>webgl-debug.js <a href="https://github.com/KhronosGroup/WebGLDeveloperTools" target="_blank" rel="external">https://github.com/KhronosGroup/WebGLDeveloperTools</a></li>
<li>webgl-debug.js 사용법 <a href="https://www.khronos.org/webgl/wiki/Debugging" target="_blank" rel="external">https://www.khronos.org/webgl/wiki/Debugging</a></li>
<li><code>gl = WebGLDebugUtils.makeDebugContext(canvas.getContext(&quot;webgl&quot;));</code></li>
</ul>
</li>
</ul>
<h2 id="웹지엘-오류"><a href="#웹지엘-오류" class="headerlink" title="웹지엘 오류"></a>웹지엘 오류</h2><ul>
<li>gl.NO_ERROR: 마지막 gl.getError() 호출 후에도 오류 없음.</li>
<li>gl.INVALID_ENUM: GL enum 인자값의 범위를 초과함.</li>
<li>gl.INVALID_VALUE: 숫자 타입 인자가 범위를 초과함.</li>
<li>gl.INVALID_OPERATION: 웹지엘에 없는 메서드 호출하거나 호출 순서 잘못됨.</li>
<li>gl.OUT_OF_MEMORY: 웹지엘 메서드 실행시 메모리 부족함.</li>
</ul>
<h2 id="웹지엘-인스펙터"><a href="#웹지엘-인스펙터" class="headerlink" title="웹지엘 인스펙터"></a>웹지엘 인스펙터</h2><h3 id="소개-및-설치"><a href="#소개-및-설치" class="headerlink" title="소개 및 설치"></a>소개 및 설치</h3><ul>
<li>웹지엘 전용 디버거 (DirectX: PIX, 오픈지엘: gDEBugger)</li>
<li>크롬 확장 프로그램 by 벤 베닉(Ben Vanik)</li>
<li><a href="https://benvanik.github.io/WebGL-Inspector/" target="_blank" rel="external">https://benvanik.github.io/WebGL-Inspector/</a></li>
<li>크롬 웹스토어 - <a href="https://chrome.google.com/webstore/detail/webgl-inspector/ogkcjmbhnfmlnielkjhedpcjomeaghda?hl=ko" target="_blank" rel="external">WebGL Inspector</a></li>
<li>웹지엘 인스펙터 설치 후 크롬 주소창에 ‘GL’ 아이콘 표시</li>
<li>뷰포트 우측상단의 Capture, UI 버튼 표시</li>
</ul>
<h3 id="패널"><a href="#패널" class="headerlink" title="패널"></a>패널</h3><ul>
<li>트레이스(trace): 웹지엘 상태 변화와 무관한 호출을 강조 표시<ul>
<li>F6: 소스코드 한단계씩 위로 이동</li>
<li>F7: 다음 호출 생략 (drawElement 단위로 바로 이동)</li>
<li>F8: 소스코드 한단계씩 아래로 이동</li>
<li>F9: 소스코드 마지막으로 이동 (전체 코드 실행)</li>
<li>F10: 처음으로 이동 (다시 시작)</li>
</ul>
</li>
<li>타임라인(timeline): 실시간 통계 (어떻게 쓰는거야?)</li>
<li>스테이트(state): 캡처 상태의 정보의 스냅샷</li>
<li>텍스처(textures): 텍스처 주소, 필터링 등</li>
<li>버퍼(buffers): 버퍼 크기, 내용, 바이딩 등</li>
<li>프로그램(programs): 버텍스/프래그먼트 세이더 소스코드 확인</li>
</ul>
<h1 id="웹지엘-좌표계"><a href="#웹지엘-좌표계" class="headerlink" title="웹지엘 좌표계"></a>웹지엘 좌표계</h1><p>웹지엘 좌표계, 클립 공간, 뷰 볼륨에 대해 살펴봅니다.</p>
<h2 id="1-좌표계의-이해"><a href="#1-좌표계의-이해" class="headerlink" title="1. 좌표계의 이해"></a>1. 좌표계의 이해</h2><h3 id="데카르트-좌표계"><a href="#데카르트-좌표계" class="headerlink" title="데카르트 좌표계"></a>데카르트 좌표계</h3><p><img width="500" src="https://cloud.githubusercontent.com/assets/6646861/12419771/7c54f146-befb-11e5-8433-e7ed9dbf582c.png" style="margin:0;padding:0">  </p>
<ul>
<li>위쪽 +Y 기본 좌표계  </li>
<li>데카르트  == 카테시안<br>(Orgin: Descartes -&gt; Latin: Catesius adj. Cartesian)</li>
</ul>
<h3 id="오른손-좌표계"><a href="#오른손-좌표계" class="headerlink" title="오른손 좌표계"></a>오른손 좌표계</h3><p><img width="500" src="https://cloud.githubusercontent.com/assets/6646861/12256982/908e8ff2-b945-11e5-8aa6-36b37dee8ea8.png" style="margin:0;padding:0"><br>+ 방향만 표시한 오른손 좌표계 </p>
<ul>
<li>모니터가 나를 향한 방향 +Z</li>
<li>카메라/모델의 죄표계로 사용</li>
<li>좌표계 범위<ul>
<li>-1 &lt;= X &lt;= +1</li>
<li>-1 &lt;= Y &lt;= +1</li>
<li>-1 &lt;= Z &lt;= +1</li>
</ul>
</li>
</ul>
<h3 id="텍스처-좌표계"><a href="#텍스처-좌표계" class="headerlink" title="텍스처 좌표계"></a>텍스처 좌표계</h3><p><img width="500" src="https://cloud.githubusercontent.com/assets/6646861/12419761/72045dda-befb-11e5-9ff6-cfe106a5f262.png" style="margin:0;padding:0">  </p>
<ul>
<li>S, T (U, V)  </li>
<li>(0, 0) 좌측하단  </li>
<li>(1, 1) 우측상단  </li>
</ul>
<p>웹지엘 텍스처 좌표는 위쪽이 +Y 방향이지만,<br>이미지 좌표는 아래쪽이 +Y 방향인 스크린 좌표계를 따른다.<br>따라서 별 다른 처리없이 이미지를 매핑하면 상이 뒤집힌다.</p>
<ul>
<li><p>이미지 좌표<br><img width="500" src="https://cloud.githubusercontent.com/assets/6646861/12420107/d0972236-befd-11e5-89ee-3b56f4f0345d.png" style="margin:0;padding:0"><br>  이미지 좌표는 아래쪽 +Y 스크린 좌표</p>
</li>
<li><p>텍스처 좌표<br><img width="500" src="https://cloud.githubusercontent.com/assets/6646861/12420122/f4ffc2cc-befd-11e5-870c-43178a55bfd7.png" style="margin:0;padding:0"><br>  이미지를 그대로 매핑하여 Y축 기준으로 이미지가 뒤집힌 상태</p>
</li>
</ul>
<h3 id="클립-영역"><a href="#클립-영역" class="headerlink" title="클립 영역"></a>클립 영역</h3><p><img width="500" src="https://cloud.githubusercontent.com/assets/6646861/12261818/f054ba1c-b966-11e5-90a3-2e76e3dc2569.png" style="margin:0;padding:0"></p>
<hr>
<h2 id="뷰-볼륨"><a href="#뷰-볼륨" class="headerlink" title="뷰 볼륨"></a>뷰 볼륨</h2><p>웹지엘 뷰 볼륨 2x2x2</p>
<h3 id="Near-Far-평면"><a href="#Near-Far-평면" class="headerlink" title="Near, Far 평면"></a>Near, Far 평면</h3><ul>
<li>Near ~ Far 범위로 객체의 깊이를 구할 수 있다.</li>
<li>Near 평면은 NDC Z축의 -1에 대응 (Near != 0)</li>
<li>Far 평면은 NDC Z축의 +1에 대응</li>
<li>카메라 공간으로 NDC를 바라보면 Z는 음의 방향으로 멀어진다.</li>
<li>Near: 0.1 -&gt; -Near: -0.1</li>
<li>Far: 100 -&gt; -Far: -100</li>
<li>-0.1 ~ -100 -&gt; NDC 맵핑 </li>
</ul>
<!--
(0) z' = A * z + B
(1) A * -Near + B = -1
(2) A * -Far + B = 1

-(A * -Far + B) = -1 

-1 - 1 = -2
A * -Near + B -(A * -Far + B) = -2 // B 소거
A * (-Near + Far) = -2

따라서 A = 2 / (Near - Far)

(1) 대입

따라서 B = (Near + Far) / (Near - Far)

(0) 대입

결국 z' = 2 / (Near - Far) * z + (Near + Far) / (Near - Far)

Near = 0.1, Far = 100이라면
Near - Far = -99
Near _ Far = 100.1

z' = (2 * z + 100.1) / -99.9

z = -0.1 -> z' = -1
z = -100 -> z' = 1

//-->
<h3 id="로컬과-월드-공간"><a href="#로컬과-월드-공간" class="headerlink" title="로컬과 월드 공간"></a>로컬과 월드 공간</h3><ul>
<li>로컬은 객체마다 가지는 좌표 공간</li>
<li>월드는 로컬 좌표 공간을 가진 객체가 놓이는 공간</li>
</ul>
<h3 id="카메라-공간"><a href="#카메라-공간" class="headerlink" title="카메라 공간"></a>카메라 공간</h3><ul>
<li>Camera/Eye/View 공간이라고 불림</li>
<li>사람의 눈. 즉, 카메라 좌표를  중심으로 바라본 공간</li>
<li>객체의 좌표는 카메라 공간을 중심으로 변환</li>
<li>객체 좌표(0,0,0) -&gt; 카메라 좌표(0,0,100) = 카메라 기준 객체 좌표 (0,0,-100)</li>
</ul>
<h3 id="버텍스-회전-방향"><a href="#버텍스-회전-방향" class="headerlink" title="버텍스 회전 방향"></a>버텍스 회전 방향</h3><ul>
<li>버텍스 인덱스 순서로 회전 방향 결정</li>
<li>반시계방향(CCW): 앞면</li>
<li>시계방향(CW): 뒷면 </li>
</ul>
<hr>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><ul>
<li><a href="http://www.songho.ca/opengl/gl_projectionmatrix.html" target="_blank" rel="external">OpenGL Projection Matrix - songho.ca</a></li>
</ul>
<h1 id="웹지엘-용어"><a href="#웹지엘-용어" class="headerlink" title="웹지엘 용어"></a>웹지엘 용어</h1><p>웹지엘을 공부할 때 필수적으로 알아야 할 용어를 정리해 본다.</p>
<h2 id="1-기본-용어"><a href="#1-기본-용어" class="headerlink" title="1. 기본 용어"></a>1. 기본 용어</h2><hr>
<h3 id="버텍스-vertex"><a href="#버텍스-vertex" class="headerlink" title="버텍스(vertex)"></a>버텍스(vertex)</h3><ul>
<li>3D 객체의 꼭지점 혹은 정정</li>
<li>하나의 정점은 3차원 좌표계로 구성(x, y, z)</li>
<li>실수형(float type)</li>
<li>위치 좌표, 색상, 법선, 텍스쳐 좌표에 연관</li>
</ul>
<h3 id="인덱스-index"><a href="#인덱스-index" class="headerlink" title="인덱스(index)"></a>인덱스(index)</h3><ul>
<li>버텍스의 접근자</li>
<li>정수형(integer type)</li>
</ul>
<h3 id="기하-geometry"><a href="#기하-geometry" class="headerlink" title="기하(geometry)"></a>기하(geometry)</h3><ul>
<li>버텍스로 구성하는 도형</li>
<li>3개의 버텍스로 이루어진 하나 이상의 삼각형으로 구성</li>
</ul>
<h3 id="텍스처-texure"><a href="#텍스처-texure" class="headerlink" title="텍스처(texure)"></a>텍스처(texure)</h3><ul>
<li>주로 물체의 표면의 질감을 나타내는 2차원 사진 데이터 저장에 사용</li>
<li>텍스처 좌표는 S(x), T(y) 2차원 좌표로 구성 (DirectX는 UV로 표현)</li>
<li>사진은 픽셀(pixel, picture element)로 구성</li>
<li>텍스처는 텍셀(texel, texture element)로 구성</li>
<li>텍스처는 샘플러 변수(sampler variable)로 표시(sampler2D)</li>
</ul>
<h3 id="프래그먼트-fragment"><a href="#프래그먼트-fragment" class="headerlink" title="프래그먼트(fragment)"></a>프래그먼트(fragment)</h3><ul>
<li>웹지엘에서 픽셀을 프래그먼트로 표현</li>
<li>버텍스로 구성된 삼각형에 색상/텍스처 등을 할당</li>
</ul>
<h3 id="버퍼-buffer"><a href="#버퍼-buffer" class="headerlink" title="버퍼(buffer)"></a>버퍼(buffer)</h3><ul>
<li>메모리 저장소</li>
<li>버텍스/인덱스/컬러 정보/텍스처 좌표 등을 저장</li>
</ul>
<h3 id="타입드어레이-typed-array"><a href="#타입드어레이-typed-array" class="headerlink" title="타입드어레이(typed array)"></a>타입드어레이(typed array)</h3><ul>
<li>자바스크립트 배열로 8종 (Int8/16/32Array, Uint8/16/32Array, Float32/64Array)</li>
<li>바이너리 데이터 접근으로 기하 처리 성능 향상</li>
<li>bufferData 소스로 사용</li>
</ul>
<h3 id="버텍스-버퍼-오브젝트-VBO-Vertex-Buffer-Object"><a href="#버텍스-버퍼-오브젝트-VBO-Vertex-Buffer-Object" class="headerlink" title="버텍스 버퍼 오브젝트(VBO, Vertex Buffer Object)"></a>버텍스 버퍼 오브젝트(VBO, Vertex Buffer Object)</h3><ul>
<li>웹지엘용 버텍스 버퍼 객체</li>
<li>버텍스 좌표로 구성된 기하 데이터 저장</li>
<li>데이터는 자바스크립트 배열 사용(Float32Array, typed array)</li>
</ul>
<h3 id="인덱스-버퍼-오브젝트-IBO-Index-Buffer-Object"><a href="#인덱스-버퍼-오브젝트-IBO-Index-Buffer-Object" class="headerlink" title="인덱스 버퍼 오브젝트(IBO, Index Buffer Object)"></a>인덱스 버퍼 오브젝트(IBO, Index Buffer Object)</h3><ul>
<li>웹지엘용 인덱스 버퍼 객체</li>
<li>데이터는 자바스크립트 배열 사용(Uint16Array, typed array)</li>
<li>16비트 정수형으로 제한(65,535개)</li>
</ul>
<h2 id="2-셰이더-용어"><a href="#2-셰이더-용어" class="headerlink" title="2. 셰이더 용어"></a>2. 셰이더 용어</h2><hr>
<p>GLSL(OpenGL Shading Language, 오픈지엘 셰이딩 언어)에 대한 이해가 필요하다.</p>
<h3 id="버텍스-셰이더-vertex-shader"><a href="#버텍스-셰이더-vertex-shader" class="headerlink" title="버텍스 셰이더(vertex shader)"></a>버텍스 셰이더(vertex shader)</h3><ul>
<li>버텍스 애트리뷰트에 대한 연산 기술</li>
<li>정점 셰이더, 버텍스 마다 호출</li>
<li>기하 데이터(버텍스 좌표, 텍스처 좌표 등) 처리</li>
</ul>
<h3 id="프래그먼트-셰이더-pragment-shader"><a href="#프래그먼트-셰이더-pragment-shader" class="headerlink" title="프래그먼트 셰이더(pragment shader)"></a>프래그먼트 셰이더(pragment shader)</h3><ul>
<li>레스터화 단계에서 프래그먼트의 처리</li>
<li>각 픽셀(프래그먼트)의 색상 계산 처리</li>
</ul>
<h3 id="셰이더-프로그램-shader-program"><a href="#셰이더-프로그램-shader-program" class="headerlink" title="셰이더 프로그램(shader program)"></a>셰이더 프로그램(shader program)</h3><ul>
<li>컴파일한 버텍스/프래그먼트 셰이더를 링크하여 GPU에 전달</li>
<li>두 개 셰이더를 링크 하는 순간 동일한 이름으로 선언된 베이링 변수 연결</li>
</ul>
<h3 id="애트리뷰트-attribute"><a href="#애트리뷰트-attribute" class="headerlink" title="애트리뷰트(attribute)"></a>애트리뷰트(attribute)</h3><ul>
<li>버텍스 셰이더와 웹지엘 간의 버텍스 데이터 연결</li>
<li>버텍스 세이더에서 사용하는 입력 변수</li>
<li>버텍스 좌표/색상, 텍스쳐 좌표, 법선 벡터(vertex normal) 등 처리</li>
</ul>
<h3 id="유니폼-uniform"><a href="#유니폼-uniform" class="headerlink" title="유니폼(uniform)"></a>유니폼(uniform)</h3><ul>
<li>버텍스/프래그먼트 셰이더 양쪽에서 사용하는 읽기 전용 변수</li>
<li>광원 등 처리</li>
<li>gl.unifomMatix#fv()를 통해 자바스크립트에서 셰이더로 전달</li>
<li>gl.uniformMatrix4fv는 실수형 벡터를 사용하는 4x4 행렬 의미</li>
<li>gl.uniform3fv는 3개의 실수형 벡터 의미 (3차원 좌표, vec3)</li>
</ul>
<h3 id="베어링-varing"><a href="#베어링-varing" class="headerlink" title="베어링(varing)"></a>베어링(varing)</h3><ul>
<li>버텍스 세이더에서 프래그먼트 세이더로 값을 전달할 때 사용하는 변수</li>
<li>양쪽 셰이더에서 동일한 변수명으로 선언해야 변수 공유 가능</li>
<li>버텍스 셰이더에서는 읽기/쓰기 가능하지만 프래그먼트 셰이더에서는 읽기 전용</li>
</ul>
<h3 id="상수-const"><a href="#상수-const" class="headerlink" title="상수(const)"></a>상수(const)</h3><ul>
<li>컴파일타임(compile-time) 상수</li>
</ul>
<h3 id="타입-type"><a href="#타입-type" class="headerlink" title="타입(type)"></a>타입(type)</h3><ul>
<li>void: 반환값 없는 함수</li>
<li>bool: 조건형</li>
<li>int: 부호가 있는 정수형(signed integer)</li>
<li>float: 실수형</li>
<li>vec#: #개의 실수형 벡터(vec2, vec3, vec4)</li>
<li>bvec#: #개의 조건형 벡터(bvec2, bvec3, bvec4)</li>
<li>ivec#: #개의 정수형 벡터(ivec2, ivec3, ivec4)</li>
<li>mat#: #X# 실수형 행렬(mat2, mat3, mat4)</li>
<li>sampler2D: 2D 텍스처 핸들</li>
<li>samplerCube: 큐브맵 텍스처 핸들</li>
</ul>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">attribute</span> <span class="keyword">vec3</span> aVertexPosition;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">varying</span> <span class="keyword">vec4</span> vColor;</span><br><span class="line"><span class="keyword">varying</span> <span class="keyword">vec2</span> vTextureCoord;</span><br><span class="line"><span class="keyword">varying</span> <span class="keyword">vec3</span> vVertexNormal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="keyword">sampler2D</span> uSampler;</span><br><span class="line"><span class="keyword">uniform</span> <span class="keyword">samplerCube</span> uCubeSampler;</span><br></pre></td></tr></table></figure>
<h1 id="버텍스-처리-vertex-processing"><a href="#버텍스-처리-vertex-processing" class="headerlink" title="버텍스 처리(vertex processing)"></a>버텍스 처리(vertex processing)</h1><p>3D 버텍스 좌표를 2D 스크린 좌표에 투영하는 과정을 말한다.<br>특히 뷰 변환은 카메라와 관련이 있다. 웹지엘 카메라는 4x4 행렬을 이용한다.<br>행렬 변환으로 카메라와 3D 객체를 컨트롤하는 기본 내용을 담고 있다. (정리중)</p>
<h2 id="1-버텍스-변환"><a href="#1-버텍스-변환" class="headerlink" title="1. 버텍스 변환"></a>1. 버텍스 변환</h2><p>3D 객체를 구성하는 1x3 버텍스는 4x4 행렬을 거쳐 변환이 일어난다.<br>행렬 연산은 마주보는 차수가 같아야 가능하다.<br>버텍스 차수를 하나 늘린 동차 좌표를 사용하는 이유다. (1x4 * 4x4)</p>
<h3 id="동차-좌표-homogenous-coordinates"><a href="#동차-좌표-homogenous-coordinates" class="headerlink" title="동차 좌표(homogenous coordinates)"></a>동차 좌표(homogenous coordinates)</h3><ul>
<li>4개의 요소를 갖는 버텍스(x, y, z, w) 사용</li>
<li>w - 투영 공간(projective space)</li>
<li>w = 1 -&gt; Vertex</li>
<li>w = 0 -&gt; Vector</li>
<li>소실점(vanishing point)을 0으로 설정 </li>
<li>아핀/투영 변환에 이용</li>
</ul>
<h2 id="2-모델-변환-model-transform"><a href="#2-모델-변환-model-transform" class="headerlink" title="2. 모델 변환(model transform)"></a>2. 모델 변환(model transform)</h2><p>3D 객체를 구성하는 버텍스는 로컬 좌표계를 가지고,<br>모델 행렬을 통해 월드 좌표계에 놓여진다.  </p>
<ul>
<li>객체 로컬 좌표 -&gt; 모델 변환 -&gt; 월드 좌표</li>
</ul>
<h2 id="3-뷰-변환-view-transform"><a href="#3-뷰-변환-view-transform" class="headerlink" title="3. 뷰 변환(view transform)"></a>3. 뷰 변환(view transform)</h2><p>뷰 변환은 월드 좌표를 뷰 기준 좌표로 바꾸는 것이다.<br>모델 변환으로 나온 행렬에 뷰 행렬을 곱한다. (뷰 원점 기준의 새로운 버텍스 좌표 구하기)<br>뷰 기준 좌표계에서 카메라 동작이 이루어진다.</p>
<ul>
<li>월드 좌표 -&gt; 뷰 변환 -&gt; 뷰 좌표 (카메라가 월드를 바라본 좌표)</li>
</ul>
<h2 id="4-투영-변환-projective-transform"><a href="#4-투영-변환-projective-transform" class="headerlink" title="4. 투영 변환 (projective transform)"></a>4. 투영 변환 (projective transform)</h2><h2 id="5-원근-분할-perspective-division"><a href="#5-원근-분할-perspective-division" class="headerlink" title="5. 원근 분할(perspective division)"></a>5. 원근 분할(perspective division)</h2><p>원근 나눗셈이라고 불린다.</p>
<h3 id="정규-디바이스-좌표계-NDC-normalized-device-coordinates"><a href="#정규-디바이스-좌표계-NDC-normalized-device-coordinates" class="headerlink" title="정규 디바이스 좌표계(NDC, normalized device coordinates)"></a>정규 디바이스 좌표계(NDC, normalized device coordinates)</h3><p><img width="500" src="https://cloud.githubusercontent.com/assets/6646861/12261817/f02ced98-b966-11e5-905c-5a2378397ed6.png" style="margin:0;padding:0">  </p>
<ul>
<li>하드웨어 독립적인 중간 좌표계 사용</li>
<li>[주의] 오른손 좌표계와 +Z 방향 반대 (모니터를 향한 방향 +Z)</li>
</ul>
<p>(작성중..)</p>

      
    </div>
    
      <div class="article-toc">
        <h3>Contents</h3>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#웹지엘이란"><span class="toc-number">1.</span> <span class="toc-text">웹지엘이란?</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#렌더링-방법"><span class="toc-number">1.1.</span> <span class="toc-text">렌더링 방법</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#즉시-모드-immedate-mode"><span class="toc-number">1.1.1.</span> <span class="toc-text">즉시 모드(immedate mode)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#지연-보류-모드-retain-mode"><span class="toc-number">1.1.2.</span> <span class="toc-text">지연(보류) 모드(retain mode)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#브라우저-지원"><span class="toc-number">1.2.</span> <span class="toc-text">브라우저 지원</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PC"><span class="toc-number">1.2.1.</span> <span class="toc-text">PC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#모바일"><span class="toc-number">1.2.2.</span> <span class="toc-text">모바일</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#웹지엘-디버깅"><span class="toc-number">2.</span> <span class="toc-text">웹지엘 디버깅</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#웹-개발-디버깅-툴"><span class="toc-number">2.1.</span> <span class="toc-text">웹 개발 디버깅 툴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#웹지엘-오류"><span class="toc-number">2.2.</span> <span class="toc-text">웹지엘 오류</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#웹지엘-인스펙터"><span class="toc-number">2.3.</span> <span class="toc-text">웹지엘 인스펙터</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#소개-및-설치"><span class="toc-number">2.3.1.</span> <span class="toc-text">소개 및 설치</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#패널"><span class="toc-number">2.3.2.</span> <span class="toc-text">패널</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#웹지엘-좌표계"><span class="toc-number">3.</span> <span class="toc-text">웹지엘 좌표계</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-좌표계의-이해"><span class="toc-number">3.1.</span> <span class="toc-text">1. 좌표계의 이해</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#데카르트-좌표계"><span class="toc-number">3.1.1.</span> <span class="toc-text">데카르트 좌표계</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#오른손-좌표계"><span class="toc-number">3.1.2.</span> <span class="toc-text">오른손 좌표계</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#텍스처-좌표계"><span class="toc-number">3.1.3.</span> <span class="toc-text">텍스처 좌표계</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#클립-영역"><span class="toc-number">3.1.4.</span> <span class="toc-text">클립 영역</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#뷰-볼륨"><span class="toc-number">3.2.</span> <span class="toc-text">뷰 볼륨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Near-Far-평면"><span class="toc-number">3.2.1.</span> <span class="toc-text">Near, Far 평면</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#로컬과-월드-공간"><span class="toc-number">3.2.2.</span> <span class="toc-text">로컬과 월드 공간</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#카메라-공간"><span class="toc-number">3.2.3.</span> <span class="toc-text">카메라 공간</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#버텍스-회전-방향"><span class="toc-number">3.2.4.</span> <span class="toc-text">버텍스 회전 방향</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#참고"><span class="toc-number">3.2.5.</span> <span class="toc-text">참고</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#웹지엘-용어"><span class="toc-number">4.</span> <span class="toc-text">웹지엘 용어</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-기본-용어"><span class="toc-number">4.1.</span> <span class="toc-text">1. 기본 용어</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#버텍스-vertex"><span class="toc-number">4.1.1.</span> <span class="toc-text">버텍스(vertex)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#인덱스-index"><span class="toc-number">4.1.2.</span> <span class="toc-text">인덱스(index)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#기하-geometry"><span class="toc-number">4.1.3.</span> <span class="toc-text">기하(geometry)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#텍스처-texure"><span class="toc-number">4.1.4.</span> <span class="toc-text">텍스처(texure)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#프래그먼트-fragment"><span class="toc-number">4.1.5.</span> <span class="toc-text">프래그먼트(fragment)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#버퍼-buffer"><span class="toc-number">4.1.6.</span> <span class="toc-text">버퍼(buffer)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#타입드어레이-typed-array"><span class="toc-number">4.1.7.</span> <span class="toc-text">타입드어레이(typed array)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#버텍스-버퍼-오브젝트-VBO-Vertex-Buffer-Object"><span class="toc-number">4.1.8.</span> <span class="toc-text">버텍스 버퍼 오브젝트(VBO, Vertex Buffer Object)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#인덱스-버퍼-오브젝트-IBO-Index-Buffer-Object"><span class="toc-number">4.1.9.</span> <span class="toc-text">인덱스 버퍼 오브젝트(IBO, Index Buffer Object)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-셰이더-용어"><span class="toc-number">4.2.</span> <span class="toc-text">2. 셰이더 용어</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#버텍스-셰이더-vertex-shader"><span class="toc-number">4.2.1.</span> <span class="toc-text">버텍스 셰이더(vertex shader)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#프래그먼트-셰이더-pragment-shader"><span class="toc-number">4.2.2.</span> <span class="toc-text">프래그먼트 셰이더(pragment shader)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#셰이더-프로그램-shader-program"><span class="toc-number">4.2.3.</span> <span class="toc-text">셰이더 프로그램(shader program)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#애트리뷰트-attribute"><span class="toc-number">4.2.4.</span> <span class="toc-text">애트리뷰트(attribute)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#유니폼-uniform"><span class="toc-number">4.2.5.</span> <span class="toc-text">유니폼(uniform)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#베어링-varing"><span class="toc-number">4.2.6.</span> <span class="toc-text">베어링(varing)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#상수-const"><span class="toc-number">4.2.7.</span> <span class="toc-text">상수(const)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#타입-type"><span class="toc-number">4.2.8.</span> <span class="toc-text">타입(type)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#버텍스-처리-vertex-processing"><span class="toc-number">5.</span> <span class="toc-text">버텍스 처리(vertex processing)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-버텍스-변환"><span class="toc-number">5.1.</span> <span class="toc-text">1. 버텍스 변환</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#동차-좌표-homogenous-coordinates"><span class="toc-number">5.1.1.</span> <span class="toc-text">동차 좌표(homogenous coordinates)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-모델-변환-model-transform"><span class="toc-number">5.2.</span> <span class="toc-text">2. 모델 변환(model transform)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-뷰-변환-view-transform"><span class="toc-number">5.3.</span> <span class="toc-text">3. 뷰 변환(view transform)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-투영-변환-projective-transform"><span class="toc-number">5.4.</span> <span class="toc-text">4. 투영 변환 (projective transform)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-원근-분할-perspective-division"><span class="toc-number">5.5.</span> <span class="toc-text">5. 원근 분할(perspective division)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#정규-디바이스-좌표계-NDC-normalized-device-coordinates"><span class="toc-number">5.5.1.</span> <span class="toc-text">정규 디바이스 좌표계(NDC, normalized device coordinates)</span></a></li></ol></li></ol></li></ol>
      </div>
    
    
      <footer class="article-footer">
        
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/dev/2016/01/04/matrix/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">행렬(matrix)&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Myoung Chae
    </div>
  </div>
</footer>
    

<script src="/dev/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/dev/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/dev/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/dev/js/script.js" type="text/javascript"></script>
  </div>
</body>
</html>